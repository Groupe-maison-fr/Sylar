# Sylar

Service cloner for development purpose

## Developpement setup
```
make dev-up
make shell
```

### In vagrant slave
```
sudo zpool create -f sylar /dev/sdb /dev/sdc
```

![Diagram](https://mermaid.ink/svg/eyJjb2RlIjoiZ3JhcGggVERcbiAgICBzdWJncmFwaCBcIkxlZ2VuZFwiXG4gICAgICAgIGxlZ2VuZE15c3FsWyhcIk15c3FsIFNlcnZlclwiKV0gXG4gICAgICAgIGxlZ2VuZERvY2tlclsvXCJEb2NrZXJcIi9dXG4gICAgZW5kXG4gICAgc3ViZ3JhcGggXCJmYTpmYS1zZXJ2ZXIgTWFzdGVyIDE5Mi4xNjguOTkuMjBcIlxuICAgICAgICBtYXN0ZXJbKFwiTXlzcWwgTWFzdGVyXCIpXSBcbiAgICBlbmRcbiAgICBzdWJncmFwaCBcImZhOmZhLXNlcnZlciBTbGF2ZSAxOTIuMTY4Ljk5LjIxXCJcbiAgICAgICAgc2xhdmVBbmRNYXN0ZXJbKFwiTXlzcWwgU2xhdmU8YnIvPk15c3FsIG1hc3RlclwiKV1cblxuICAgICAgICBzeWxhck1hc3RlclsvXCJTeWxhciBtYXN0ZXI8YnIvPk15c3FsIHNsYXZlPGJyLz4vc3lsYXIvbXlzcWw6L3Zhci9saWIvbXlzcWxcIi9dXG4gICAgICAgIHN5bGFyUmVwbGljYTFbL1wiTXlzcWwgU3lsYXI8YnIvPjFzdCBzbmFwc2hvdDxici8-L3N5bGFyL215c3FsL3NsYXZlMTovdmFyL2xpYi9teXNxbFwiL11cbiAgICAgICAgc3lsYXJSZXBsaWNhMlsvXCJNeXNxbCBTeWxhcjxici8-Mm5kIHNuYXBzaG90PGJyLz4vc3lsYXIvbXlzcWwvc2xhdmUyOi92YXIvbGliL215c3FsXCIvXVxuICAgICAgICBzeWxhclJlcGxpY2EzWy9cIk15c3FsIFN5bGFyPGJyLz4zcmQgc25hcHNob3Q8YnIvPi9zeWxhci9teXNxbC9zbGF2ZTM6L3Zhci9saWIvbXlzcWxcIi9dXG4gICAgICAgIHpmc1Jvb3R7e1wiWmZzIHJvb3Q6PGJyLz4vc3lsYXJcIn19XG4gICAgZW5kXG4gICAgbWFzdGVyIC0tPiBzbGF2ZUFuZE1hc3RlclxuICAgIHNsYXZlQW5kTWFzdGVyIC0tPiBzeWxhck1hc3RlclxuICAgIHN5bGFyTWFzdGVyIC0tPiBzeWxhclJlcGxpY2ExXG4gICAgc3lsYXJNYXN0ZXIgLS0-IHN5bGFyUmVwbGljYTJcbiAgICBzeWxhck1hc3RlciAtLT4gc3lsYXJSZXBsaWNhM1xuXG5jbGFzc0RlZiBteXNxbCBmaWxsOiNCQkIsc3Ryb2tlOiMxMTEsc3Ryb2tlLXdpZHRoOjFweDtcbmNsYXNzRGVmIHN5bGFyIGZpbGw6I0VFRSxzdHJva2U6IzExMSxzdHJva2Utd2lkdGg6MXB4O1xuY2xhc3MgbGVnZW5kTXlzcWwsbWFzdGVyLHNsYXZlQW5kTWFzdGVyIG15c3FsO1xuY2xhc3MgbGVnZW5kRG9ja2VyLHN5bGFyTWFzdGVyLHN5bGFyUmVwbGljYTEsc3lsYXJSZXBsaWNhMixzeWxhclJlcGxpY2EzIHN5bGFyO1xuIiwibWVybWFpZCI6e30sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)

```
sudo mkdir /data
sudo fallocate -l 16G /data/replica.zfs
sudo zpool create replica /data/replica.zfs
sudo zpool list
sudo zfs create replica/master.mysql
ls /replica/master.mysql
```

```
create table example_database.test (idx INT(11) NOT NULL AUTO_INCREMENT,val VARCHAR(30) NOT NULL,UNIQUE KEY ix_idx (idx) USING BTREE);
insert into example_database.test values(1,"a");
```

```
select * from example_database.test;
```

```
vagrant plugin install vagrant-fsnotify
```

ssh-keygen
ssh-copy-id 192.168.99.21
cp id_rsa readable.id_rsa;chmod a+r readable.id_rsa
